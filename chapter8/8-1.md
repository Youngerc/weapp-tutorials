#8-1 网络相关
本节主要阐述微信小程序网络相关的API。网络API主要用于本地和服务器交互。每个微信小程序需要事先设置一个通讯域名，小程序可以跟指定的域名与进行网络通信。包括普通 HTTPS 请求（wx.request）、 WebSocket 通信（wx.connectSocket）、上传文件（wx.uploadFile）和下载文件（wx.downloadFile)。
网络API所包含的方法如表8-1所示：

表8-1

| API | 说明 |
| :--- | :--- |
| wx.request | 发起网络请求 |
| wx.uploadFile | 上传文件 |
| wx.downloadFile | 下载文件 |
| wx.connectSocket | 创建 WebSocket 连接 |
| wx.onSocketOpen | 监听 WebSocket 打开 |
| wx.onSocketError | 监听 WebSocket 错误 |
| wx.sendSocketMessage | 发送 WebSocket 消息 |
| wx.onSocketMessage | 接受 WebSocket 消息 |
| wx.closeSocket | 关闭 WebSocket 连接 |
| wx.onSocketClose | 监听 WebSocket 关闭 |

**注意：**
网络请求的 referer 是不可以设置的，格式固定为 https:// servicewechat.com/ {appid} / {version} / page-frame.html，其中 {appid} 为小程序的 appid，{version} 为小程序的版本号，版本号为 0 表示为开发版。




